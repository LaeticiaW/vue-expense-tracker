(function(e){function t(t){for(var r,s,i=t[0],c=t[1],l=t[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,i=1;i<a.length;i++){var c=a[i];0!==o[c]&&(r=!1)}r&&(n.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},o={app:0},n=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0040":function(e,t,a){"use strict";var r=a("be5f"),o=a.n(r);o.a},"03d5":function(e,t,a){"use strict";var r=a("7d35"),o=a.n(r);o.a},"0830":function(e,t,a){},"1dfb":function(e,t,a){"use strict";var r=a("96be"),o=a.n(r);o.a},"1f25":function(e,t,a){},"242b":function(e,t,a){},"254d":function(e,t,a){},"28ef":function(e,t,a){"use strict";var r=a("254d"),o=a.n(r);o.a},"2b5b":function(e,t,a){"use strict";var r=a("cbb6"),o=a.n(r);o.a},"32ca":function(e,t,a){},"3ee8":function(e,t,a){},"40d1":function(e,t,a){},"41d2":function(e,t,a){"use strict";var r=a("0830"),o=a.n(r);o.a},"42a8":function(e,t,a){"use strict";var r=a("9807"),o=a.n(r);o.a},4678:function(e,t,a){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(e){var t=n(e);return a(t)}function n(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=n,e.exports=o,o.id="4678"},"56d7":function(e,t,a){"use strict";a.r(t);a("b0c0"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),o=a("4452"),n=a.n(o),s=a("ea7f"),i=a.n(s),c=a("5b01"),l=a.n(c),u=a("4523"),d=a.n(u),p=a("9eed"),f=a.n(p),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("app-bar"),a("v-content",[a("v-container",{staticClass:"content-container",attrs:{fluid:""}},[a("router-view",{key:e.$route.fullPath})],1)],1)],1)},m=[],v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-navigation-drawer",{attrs:{clipped:"",absolute:"",app:"","hide-overlay":"",temporary:""},model:{value:e.navDrawerOpen,callback:function(t){e.navDrawerOpen=t},expression:"navDrawerOpen"}},[a("v-list",{attrs:{dense:"",nav:""}},e._l(e.navRoutes,(function(t){return a("v-list-item",{key:t.name,attrs:{link:"",to:{name:t.name}}},[a("v-list-item-icon",[a("v-icon",[e._v(e._s(t.meta.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.name))])],1)],1)})),1)],1),a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[e.isLoggedIn?a("v-app-bar-nav-icon",{on:{click:function(t){return t.stopPropagation(),e.navIconClicked(t)}}}):e._e(),a("v-toolbar-title",[e._v("Expense Tracker")]),a("v-spacer"),e.isLoggedIn?a("v-menu",{attrs:{"offset-y":"",bottom:"","close-on-content-click":!0,transition:"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-avatar",e._g({attrs:{color:"white",size:"36"}},r),[a("span",{staticClass:"primary--text headline"},[e._v(e._s(e.avatarLetter))])])]}}],null,!1,140090582)},[a("v-list",{attrs:{dense:""}},[a("v-list-item",{attrs:{link:""},on:{click:e.logout}},[a("v-list-item-title",[e._v("Logout")])],1)],1)],1):e._e()],1)],1)},h=[],b=(a("4de4"),a("8c4f")),y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("page-header",{attrs:{title:"Dashboard"}}),a("grid-layout",e._b({class:{hidelayout:e.hideLayout},attrs:{layout:e.dashboardLayout},on:{"layout-updated":e.layoutUpdated,updated:e.layoutUpdated}},"grid-layout",e.dashboardOptions,!1),e._l(e.dashboardLayout,(function(t){return a("grid-item",e._b({key:t.i,attrs:{id:t.i}},"grid-item",t,!1),[a(t.component,{tag:"component",attrs:{options:t},on:{maximize:function(a){return e.maximize(t)},minimize:function(a){return e.minimize(t)}}})],1)})),1)],1)},x=[],C=(a("4160"),a("a630"),a("3ca3"),a("159b"),a("5530")),D=a("7be8"),k=a.n(D),_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("dashlet",{attrs:{options:e.options},scopedSlots:e._u([{key:"actions",fn:function(){return[a("date-range-input",{attrs:{"date-range":e.filter},on:{"date-range-changed":e.filterChanged}})]},proxy:!0},{key:"content",fn:function(){return[e.show?a("div",{staticClass:"content-container"},[a("div",{staticClass:"chart-container"},[e.show?a("highcharts",{ref:"highcharts",attrs:{options:e.chartOptions}}):e._e()],1),a("div",{staticClass:"chart-bottom-text"},[e._v("Total Expenses: $"+e._s(e._f("formatAmount")(e.totalExpensesAmount)))])]):e._e(),a("snack-msg",{attrs:{options:e.snackOptions}})]},proxy:!0}])})},w=[],E=(a("99af"),a("d81d"),a("13d5"),a("a9e3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashlet elevation-2"},[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v(e._s(e.options.dashletTitle))]),a("v-spacer"),e._t("actions"),e.expanded?e._e():a("v-btn",{staticClass:"icon-btn control",attrs:{small:"",dark:"",title:"Maximize",color:"primary"},on:{click:e.maximize}},[a("v-icon",[e._v("mdi-fullscreen")])],1),e.expanded?a("v-btn",{staticClass:"icon-btn control",attrs:{small:"",dark:"",title:"Minimize",color:"primary"},on:{click:e.minimize}},[a("v-icon",[e._v("mdi-fullscreen-exit")])],1):e._e()],2),a("v-divider"),a("div",{staticClass:"dashlet-content"},[e._t("content")],2)],1)}),S=[],j={name:"Dashlet",inject:["dashboardEventBus"],props:{options:{type:Object,required:!0}},data:function(){return{expanded:!1}},methods:{maximize:function(){this.expanded=!0,this.$emit("maximize"),this.dashboardEventBus.$emit("maximize",this.options)},minimize:function(){this.expanded=!1,this.$emit("minimize"),this.dashboardEventBus.$emit("minimize",this.options)}}},I=j,T=(a("2b5b"),a("2877")),V=a("6544"),M=a.n(V),$=a("8336"),O=a("ce7e"),U=a("132d"),A=a("2fa4"),Y=a("71d9"),L=a("2a7f"),q=Object(T["a"])(I,E,S,!1,null,"1b7836aa",null),F=q.exports;M()(q,{VBtn:$["a"],VDivider:O["a"],VIcon:U["a"],VSpacer:A["a"],VToolbar:Y["a"],VToolbarTitle:L["c"]});a("b680"),a("d3b7"),a("25f0");var R=a("bc3a"),N=a.n(R),z=a("c1df"),P=a.n(z),B=a("6612"),H=a.n(B),G={expenseUrl:"http://localhost:3000/expense/",getExpenses:function(e){return N.a.get(this.expenseUrl,{params:{startDate:e.startDate,endDate:e.endDate,categoryIds:e.categoryIds}}).then((function(e){var t=e.data;return t})).catch((function(e){return console.error("ExpenseService.getExpenses error:",e.response?e.response:e),Promise.reject(e.response)}))},saveExpense:function(e){return void 0===e._id?this.createExpense(e):this.updateExpense(e)},createExpense:function(e){return N()({url:this.expenseUrl,method:"POST",data:e}).then((function(e){return e.data})).catch((function(e){return console.error("ExpenseService.createExpense error",e.response?e.response:e),Promise.reject(e.response)}))},updateExpense:function(e){return N()({url:this.expenseUrl+e._id,method:"PUT",data:e}).then((function(e){return e.data})).catch((function(e){return console.error("ExpenseService.updateExpense error",e.response?e.response:e),Promise.reject(e.response)}))},deleteExpense:function(e){return N()({url:this.expenseUrl+e,method:"DELETE"}).then((function(e){return e.data})).catch((function(e){return console.error("ExpenseService.deleteExpense error",e.response?e.response:e),Promise.reject(e.response)}))},getExpenseTotals:function(e){return N.a.get("".concat(this.expenseUrl,"totals"),{params:{startDate:e.startDate,endDate:e.endDate,categoryIds:e.categoryIds?e.categoryIds:null}}).then((function(e){var t=e.data,a="",r=0,o=[],n=null;return t.forEach((function(e){var t=e._id.categoryId,s=e.categoryName,i=e._id.subcategoryId,c=e.subcategoryName,l=e.totalAmount;t!==a?(""!==a&&o.push(JSON.parse(JSON.stringify(n))),n={categoryId:t,categoryName:s,totalAmount:l,subcategoryTotals:[]},a=t):n.totalAmount+=l,i&&n.subcategoryTotals.push({subcategoryId:i,subcategoryName:c,totalAmount:l}),r+=l})),n&&o.push(JSON.parse(JSON.stringify(n))),o.forEach((function(e){e.percent=e.totalAmount/r*100})),o})).catch((function(e){return console.error("ExpenseService.getExpenseTotals error:",e.response?e.response:e),Promise.reject(e.response)}))},getExpenseTimeSeries:function(e){return N.a.get("".concat(this.expenseUrl,"timeseries"),{params:{startDate:e.startDate,endDate:e.endDate,categoryIds:e.categoryIds?e.categoryIds:null}}).then((function(e){var t,a=e.data,r=[],o={},n="",s="",i=[];return a.forEach((function(e){e.categoryId!==n&&""!==n&&(o={name:s,data:i},r.push(o),i=[]),t=P()("".concat(e.trxYear.toString(),"-").concat(H()(e.trxMonth).format("00"),"-01"),"YYYY-MM-DD").valueOf(),i.push([t,Number(e.totalAmount.toFixed(2))]),n=e.categoryId,s=e.categoryName||"Unknown"})),a.length&&(o={name:s,data:i},r.push(o)),r})).catch((function(e){return console.error("ExpenseService.getExpenseTimeSeries error:",e.response?e.response:e),Promise.reject(e.response)}))},importExpenses:function(e,t){var a=new Date;return e.forEach((function(e){e.importId=a,e.trxDate=P()(e.trxDate,t.dateFormat).format("YYYY-MM-DD"),"string"===typeof e.amount&&"$"===e.amount.substr(0,1)&&(e.amount=e.amount.substr(1))})),N.a.post("".concat(this.expenseUrl,"import"),{expenses:e,importDetails:t}).then((function(){})).catch((function(e){return console.error("Error importing expenses:",e.response?e.response:e),Promise.reject(e.response)}))},deleteExpensesByImportId:function(e){return N()({url:"".concat(this.expenseUrl,"import/").concat(e),method:"DELETE"}).then((function(e){return e.data})).catch((function(e){return console.error("ExpenseService.deleteExpensesByImportId error",e.response?e.response:e),Promise.reject(e.response)}))}},J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-snackbar",{attrs:{color:e.options.color},model:{value:e.options.show,callback:function(t){e.$set(e.options,"show",t)},expression:"options.show"}},[e._v(" "+e._s(e.options.msg)+" "),a("v-btn",{attrs:{text:""},nativeOn:{click:function(t){e.options.show=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1)},W=[],K={name:"SnackMsg",props:{options:{type:Object,required:!0}},methods:{show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";this.options.msg=e,this.options.color=t,this.options.show=!0}}},X=K,Q=a("2db4"),Z=Object(T["a"])(X,J,W,!1,null,"1ac734f4",null),ee=Z.exports;M()(Z,{VBtn:$["a"],VIcon:U["a"],VSnackbar:Q["a"]});var te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"date-range-container"},[a("span",{staticClass:"date-wrapper"},[a("v-menu",{attrs:{"offset-y":"",bottom:"","close-on-content-click":!0,transition:"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({ref:"startDate",staticClass:"start-date",attrs:{outlined:"",readonly:"",dense:"","hide-details":"",required:"",name:"startDate","background-color":"#ffffff",label:"Start Date",maxlength:10,spellcheck:"false",autocomplete:"off",autofocus:""},model:{value:e.dateRange.startDate,callback:function(t){e.$set(e.dateRange,"startDate",t)},expression:"dateRange.startDate"}},r))]}}]),model:{value:e.startDateMenu,callback:function(t){e.startDateMenu=t},expression:"startDateMenu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:"","header-color":"primary",max:e.maxDate},on:{input:e.dateRangeChanged},model:{value:e.dateRange.startDate,callback:function(t){e.$set(e.dateRange,"startDate",t)},expression:"dateRange.startDate"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.startDateMenu=!1}}},[e._v("Cancel")])],1)],1)],1),a("span",{staticClass:"date-wrapper"},[a("v-menu",{attrs:{"offset-y":"",bottom:"","close-on-content-click":!0,transition:"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({ref:"endDate",staticClass:"end-date",attrs:{outlined:"",readonly:"",dense:"","hide-details":"",required:"",name:"endDate","background-color":"#ffffff",label:"End Date",maxlength:10,spellcheck:"false",autocomplete:"off",autofocus:""},model:{value:e.dateRange.endDate,callback:function(t){e.$set(e.dateRange,"endDate",t)},expression:"dateRange.endDate"}},r))]}}]),model:{value:e.endDateMenu,callback:function(t){e.endDateMenu=t},expression:"endDateMenu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:"","header-color":"primary",max:e.maxDate},on:{input:e.dateRangeChanged},model:{value:e.dateRange.endDate,callback:function(t){e.$set(e.dateRange,"endDate",t)},expression:"dateRange.endDate"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.endDateMenu=!1}}},[e._v("Cancel")])],1)],1)],1)])},ae=[],re={name:"DateRangeInput",props:{dateRange:{type:Object,required:!0}},data:function(){return{startDateMenu:!1,endDateMenu:!1,minDate:null,maxDate:P()().format("YYYY-MM-DD")}},computed:{startDateMax:function(){return this.dateRange.endDate},endDateMin:function(){return this.dateRange.startDate}},methods:{dateRangeChanged:function(){this.$emit("date-range-changed",this.dateRange)}},created:function(){this.dateRange.startDate||P()().startOf("year").format("YYYY-MM-DD"),this.dateRange.endDate||P()().format("YYYY-MM-DD")}},oe=re,ne=(a("96d0"),a("2e4b")),se=a("e449"),ie=a("8654"),ce=Object(T["a"])(oe,te,ae,!1,null,"7fb7781b",null),le=ce.exports;M()(ce,{VBtn:$["a"],VDatePicker:ne["a"],VMenu:se["a"],VSpacer:A["a"],VTextField:ie["a"]});var ue={name:"CategoryExpensesChart",props:{options:{type:Object,required:!0}},data:function(){return{show:!0,chartOptions:{},categoryTotals:[],totalExpensesAmount:null,filter:{startDate:P()().startOf("year").format("YYYY-MM-DD"),endDate:P()().format("YYYY-MM-DD"),categoryIds:[]},snackOptions:{show:null,msg:null,color:"error"},series:[],drillDownSeries:{}}},components:{Dashlet:F,SnackMsg:ee,DateRangeInput:le},methods:{getExpenseTotals:function(){var e=this;G.getExpenseTotals(this.filter).then((function(t){e.categoryTotals=t,e.totalExpensesAmount=t.reduce((function(e,t){return e+Number(t.totalAmount)}),0),e.series=e.formatSeriesData(e.categoryTotals),e.drillDownSeries=e.formatDrillDownSeries(e.categoryTotals),e.chartOptions=e.getChartOptions(t),e.show=!0})).catch((function(t){console.error("Error retrieving expense totals:",t),e.snackOptions.msg="Error retrieving data for Expenses by Category dashlet",e.snackOptions.show=!0}))},filterChanged:function(){this.getExpenseTotals()},formatSeriesData:function(e){var t=e.map((function(e){return{name:e.categoryName||"Unknown",y:e.totalAmount,drilldown:e.categoryName||"Unknown"}}));return t},formatDrillDownSeries:function(e){var t=e.map((function(e){return{name:e.categoryName,id:e.categoryName,data:e.subcategoryTotals.map((function(e){return[e.subcategoryName||"Unknown",e.totalAmount]}))}}));return t},getChartOptions:function(){var e={chart:{type:"pie"},title:{text:void 0},tooltip:{headerFormat:"",useHTML:!0,formatter:function(){var e=H()(this.point.y).format("0,0.00"),t=" (".concat(H()(this.point.percentage).format("00.0"),"%)");return"".concat(this.point.name,": <b>$").concat(e).concat(t,"</b>")}},plotOptions:{series:{states:{inactive:{opacity:1}}},pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1,distance:25},showInLegend:!0,series:{states:{inactive:{opacity:1}}}}},legend:{layout:"vertical",align:"right",verticalAlign:"middle",useHTML:!0},series:[{name:"Categories",data:this.series}],drilldown:{drillUpButton:{position:{y:0,x:32}},series:this.drillDownSeries}};return e}},mounted:function(){this.getExpenseTotals()}},de=ue,pe=(a("dcdc"),Object(T["a"])(de,_,w,!1,null,"509eb37c",null)),fe=pe.exports,ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("dashlet",{attrs:{dashletTitle:e.options.dashletTitle,options:e.options},scopedSlots:e._u([{key:"actions",fn:function(){return[a("date-range-input",{attrs:{"date-range":e.filter},on:{"date-range-changed":e.filterChanged}})]},proxy:!0},{key:"content",fn:function(){return[e.show?a("div",{staticClass:"content-container"},[a("div",{staticClass:"chart-container"},[e.show?a("highcharts",{ref:"highcharts",attrs:{options:e.chartOptions}}):e._e()],1)]):e._e(),a("snack-msg",{ref:"snack",attrs:{options:e.snackOptions}})]},proxy:!0}])})},me=[],ve={isIE:function(){var e=window.navigator.userAgent.toLowerCase();return e&&/msie|trident/.test(e)},isEdge:function(){var e=window.navigator.userAgent.toLowerCase();return e&&/edge/.test(e)},sortArray:function(e,t){e.sort((function(e,a){return e[t].toLowerCase()<a[t].toLowerCase()?-1:e[t].toLowerCase()>a[t].toLowerCase()?1:0}))},formatTimeSeriesSharedTooltip:function(e){var t,a,r,o=this,n=function(e){var t="";switch(e){case"circle":t="●";break;case"diamond":t="♦";break;case"square":t="■";break;case"triangle":t="▲";break;case"triangle-down":t="▼";break;default:}return t},s=P()(e.points[0].key).format("MMMM YYYY"),i='<div class="graph-tooltip" style="opacity: 1"><div class="graph-tooltip-inner" style="opacity: 1 z-index: 101"><b>'.concat(s,"</b>"),c=e.points;c.sort((function(e,t){return t.y-e.y}));var l=c.reduce((function(e,t){return e+t.y}),0);return c.forEach((function(e){t=H()(e.y).format("$0,0.00"),a=l?H()(e.y/l).format("0.00%"):0,e.series.legendSymbol?(r=o.isIE()?(new XMLSerializer).serializeToString(e.series.legendSymbol.element):e.series.legendSymbol.element.outerHTML,i+="".concat('<div class="tooltip-row symbolhtml" style="display: flex; justify-content: space-between;">  <div class="tooltip-label" style="padding-right: 30px;">    <svg width="16" height="16" color="').concat(e.series.color,'">').concat(r,"</svg> ").concat(e.series.name,": ")+"  </div>"+'  <div class="tooltip-value"><b>'.concat(t," (").concat(a,")</b></div>")+"</div>"):i+="".concat('<div class="tooltip-row symbol" style="display: flex; justify-content: space-between;">  <div class="tooltip-label" style="padding-right: 30px;">    <div class="tooltip-symbol" style="color: ').concat(e.series.color,'">').concat(n(e.series.symbol),"</div> ").concat(e.series.name,": ")+"  </div>"+'  <div class="tooltip-value"><b>'.concat(t," (").concat(a,")</b></div>")+"</div>"})),i+="".concat('<div class="tooltip-row" style="display: flex; justify-content: space-between; margin-top: 8px">  <div class="tooltip-label">Total:</div>  <div class="tooltip-value">').concat(H()(l).format("$0,0.00"),"</div>")+"</div>",i+="</div></div>",i}},he={name:"ExpensesOverTimeChart",props:{options:{type:Object,required:!0}},data:function(){return{show:!0,chartOptions:{},expenses:[],filter:{startDate:P()().startOf("year").format("YYYY-MM-DD"),endDate:P()().format("YYYY-MM-DD"),categoryIds:[]},snackOptions:{show:null,msg:null,color:"error"},series:[]}},components:{Dashlet:F,SnackMsg:ee,DateRangeInput:le},methods:{getExpenseTimeSeries:function(){var e=this;G.getExpenseTimeSeries(this.filter).then((function(t){e.series=t,e.chartOptions=e.getChartOptions(),e.show=!0})).catch((function(t){console.error("Error retrieving expense time series:",t),e.$refs.snack.show("Error retrieving data for Expenses Over Time dashlet")}))},filterChanged:function(){this.getExpenseTimeSeries()},getChartOptions:function(){var e={chart:{type:"line"},time:{useUTC:!1},title:{text:void 0},tooltip:{shared:!0,valueDecimals:2,headerFormat:"",useHTML:!0,outside:!0,backgroundColor:"rgb(239, 239, 239, 1)",formatter:function(){return ve.formatTimeSeriesSharedTooltip(this)}},yAxis:{title:{text:"Amount"}},xAxis:{type:"datetime"},legend:{layout:"horizontal",align:"center",useHTML:!0},series:this.series};return e}},mounted:function(){this.getExpenseTimeSeries()}},be=he,ye=(a("74c8"),Object(T["a"])(be,ge,me,!1,null,"b034e5e0",null)),xe=ye.exports,Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h2",{staticClass:"page-title"},[e._v(e._s(e.title))])},De=[],ke={name:"PageHeader",props:{title:{type:String,required:!0}}},_e=ke,we=(a("e689"),Object(T["a"])(_e,Ce,De,!1,null,"d735fdd0",null)),Ee=we.exports,Se={w:6,h:4,minH:3,minW:4},je={name:"Dashboard",provide:function(){return{dashboardEventBus:null}},data:function(){return{dashboardOptions:{colNum:12,rowHeight:80,isDraggable:!0,isResizable:!0,isMirrored:!1,verticalCompact:!0,margin:[24,24,24,24],useCssTransforms:!1,autoSize:!0},dashboardLayout:[Object(C["a"])({x:0,y:0,i:"0"},Se,{component:"category-expenses-chart",dashletTitle:"Expenses By Category"}),Object(C["a"])({x:6,y:0,i:"1"},Se,{component:"expenses-over-time-chart",dashletTitle:"Expenses Over Time"})],hideLayout:!1}},components:{PageHeader:Ee,GridLayout:k.a.GridLayout,GridItem:k.a.GridItem,CategoryExpensesChart:fe,ExpensesOverTimeChart:xe},methods:{layoutUpdated:function(){this.triggerWindowResize()},maximizeDashlet:function(e){this.hideLayout=!0;var t=Array.from(this.$el.querySelectorAll(".vue-grid-item"));t.forEach((function(e){e.classList.add("hide")})),this.$el.querySelector('.vue-grid-item[id="'.concat(e.i,'"]')).classList.remove("hide"),this.$el.querySelector('.vue-grid-item[id="'.concat(e.i,'"]')).classList.add("maximize"),this.triggerWindowResize()},minimizeDashlet:function(){this.hideLayout=!1;var e=Array.from(this.$el.querySelectorAll(".vue-grid-item"));e.forEach((function(e){e.classList.remove("hide"),e.classList.remove("maximize")})),this.triggerWindowResize()},triggerWindowResize:function(){this.$nextTick((function(){if(document.documentMode&&document.documentMode<=11){var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)}else window.dispatchEvent(new Event("resize"))}))}},created:function(){this._provided.dashboardEventBus=new r["default"],this.dashboardEventBus=this._provided.dashboardEventBus,this.dashboardEventBus.$on("maximize",this.maximizeDashlet),this.dashboardEventBus.$on("minimize",this.minimizeDashlet)},mounted:function(){var e=this;setTimeout((function(){e.triggerWindowResize()}),0)},beforeDestroy:function(){this.dashboardEventBus.$off("maximize",this.maximizeDashlet),this.dashboardEventBus.$off("minimize",this.minimizeDashlet)}},Ie=je,Te=(a("0040"),Object(T["a"])(Ie,y,x,!1,null,"0c7a80f8",null)),Ve=Te.exports,Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("page-header",{attrs:{title:"Categories"}}),a("div",{staticClass:"page-content"},[a("v-row",{attrs:{align:"start","align-content":"start"}},[a("v-col",{attrs:{cols:"12",sm:"6",md:"5"}},[a("v-card",{staticClass:"category-tree-panel",attrs:{flat:"",outlined:""}},[a("v-toolbar",{attrs:{dense:"",flat:"",color:"secondary"}},[a("v-spacer"),a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"icon-btn",attrs:{small:"",dark:"",color:"primary",title:"Actions"}},r),[a("v-icon",{attrs:{small:""}},[e._v("mdi-dots-vertical")])],1)]}}])},[a("v-list",{attrs:{dense:""}},[a("v-list-item",{on:{click:function(t){e.showCategoryDialog=!0}}},[a("v-list-item-title",[e._v("Add Category")])],1),a("v-list-item",{attrs:{disabled:!e.isCategorySelected},on:{click:function(t){e.showSubcategoryDialog=!0}}},[a("v-list-item-title",[e._v("Add Subcategory")])],1),a("v-list-item",{attrs:{disabled:!e.isCategorySelected&&!e.isSubcategorySelected},on:{click:e.deleteItem}},[a("v-list-item-title",[e._v("Delete")])],1),a("v-divider"),a("v-list-item",{on:{click:e.expandAllCategories}},[a("v-list-item-title",[e._v("Expand All Categories")])],1),a("v-list-item",{on:{click:e.collapseAllCategories}},[a("v-list-item-title",[e._v("Collapse All Categories")])],1)],1)],1)],1),a("v-card-text",[a("div",{staticClass:"category-tree-wrapper"},[a("v-treeview",{ref:"treeviewRef",attrs:{dense:"",activatable:"","return-object":"",items:e.categories,"item-key":"treeId","item-children":"subcategories",active:e.activeCategories,color:"#454545",open:e.openCategories},on:{"update:active":e.itemActivated,"update:open":e.itemOpened},scopedSlots:e._u([{key:"append",fn:function(t){t.item;var r=t.leaf,o=t.active;return[o&&!r?a("v-btn",{attrs:{icon:"",color:"primary",title:"Add Subcategory"},on:{click:function(t){t.stopPropagation(),e.showSubcategoryDialog=!0}}},[a("v-icon",{attrs:{small:""}},[e._v(e._s("mdi-plus"))])],1):e._e(),o?a("v-btn",{attrs:{icon:"",color:"primary",title:"Delete Category"},on:{click:function(t){return t.stopPropagation(),e.deleteItem(t)}}},[a("v-icon",{attrs:{small:""}},[e._v(e._s("mdi-delete"))])],1):e._e()]}}])})],1)])],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"7"}},[e.isCategorySelected?a("category-details",{attrs:{category:e.currentCategory},on:{"category-updated":e.refreshCategories}}):e._e(),e.isSubcategorySelected?a("subcategory-details",{attrs:{category:e.parentCategory,subcategory:e.currentSubcategory},on:{"subcategory-updated":e.refreshCategories}}):e._e()],1)],1)],1),e.showCategoryDialog?a("add-category-dialog",{on:{"category-added":e.refreshCategories},model:{value:e.showCategoryDialog,callback:function(t){e.showCategoryDialog=t},expression:"showCategoryDialog"}}):e._e(),e.showSubcategoryDialog?a("add-subcategory-dialog",{attrs:{category:e.currentCategory},on:{"subcategory-added":e.refreshCategories},model:{value:e.showSubcategoryDialog,callback:function(t){e.showSubcategoryDialog=t},expression:"showSubcategoryDialog"}}):e._e(),a("snack-msg",{ref:"snack",attrs:{options:e.snackOptions}})],1)},$e=[],Oe=(a("c740"),a("a434"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{attrs:{flat:"",outlined:"",height:"calc(100vh-100px)"}},[a("v-toolbar",{attrs:{dense:"",short:"",flat:"",color:"secondary"}},[a("v-toolbar-title",{staticClass:"details-title"},[e._v("Category Details")]),a("v-spacer"),a("v-btn",{staticClass:"icon-btn",attrs:{small:"",dark:"",color:"primary",title:"Update Category"},on:{click:e.showUpdateCategoryDialog}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")])],1)],1),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"3",xs:"6",sm:"6",md:"4"}},[a("label",{attrs:{for:"name"}},[e._v("Name:")])]),a("v-col",{attrs:{cols:"9",xs:"6",sm:"6",md:"8"}},[a("div",{attrs:{id:"name"}},[e._v(e._s(e.category.name))])])],1),a("v-row",[a("v-col",{attrs:{cols:"3",xs:"6",sm:"6",md:"4"}},[a("label",{attrs:{for:"subcategories"}},[e._v("Subcategories:")])]),a("v-col",{attrs:{cols:"9",xs:"6",sm:"6",md:"8"}},e._l(e.category.subcategories,(function(t,r){return a("div",{key:r,attrs:{id:"subcategories"}},[e._v(" "+e._s(t.name)+" ")])})),0)],1)],1)],1),e.showCategoryDialog?a("update-category-dialog",{attrs:{category:e.category},on:{"category-updated":e.categoryUpdated},model:{value:e.showCategoryDialog,callback:function(t){e.showCategoryDialog=t},expression:"showCategoryDialog"}}):e._e()],1)}),Ue=[],Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{value:e.value,width:"500"},on:{"click:outside":function(t){return e.close()}}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[e._v("Update Category")])],1),a("v-card-text",{staticClass:"dialog-content"},[a("v-form",{ref:"form"},[a("div",{staticClass:"dialog-error error--text"},[e._v(e._s(e.dialogMessage))]),a("v-text-field",{attrs:{dense:"",outlined:"",maxlength:"30",label:"Category",required:"",rules:e.nameRules},model:{value:e.tempCategory.name,callback:function(t){e.$set(e.tempCategory,"name",t)},expression:"tempCategory.name"}}),a("fieldset",{staticClass:"subcategories"},[a("legend",[e._v("Subcategories")]),a("v-list",{staticClass:"overflow-y-auto",attrs:{dense:"",height:"150","max-height":"150"}},[a("v-list-item-group",{attrs:{ripple:"false"},model:{value:e.selectedSubcategory,callback:function(t){e.selectedSubcategory=t},expression:"selectedSubcategory"}},e._l(e.tempCategory.subcategories,(function(t,r){return a("v-list-item",{key:r},[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.name))])],1),a("v-list-item-action",[a("v-btn",{attrs:{small:"",icon:"",color:"primary",title:"Delete Subcategory"},on:{click:function(a){return a.stopPropagation(),e.deleteSubcategory(t,r)}}},[a("v-icon",{attrs:{small:""}},[e._v(e._s("mdi-delete"))])],1)],1)],1)})),1)],1)],1),a("div",{staticClass:"new-subcategory-container"},[a("v-spacer"),a("v-text-field",{attrs:{dense:"",outlined:"",label:"New Subcategory"},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a("v-btn",{staticClass:"icon-btn",attrs:{dark:"",small:"",color:"primary",title:"Add Subcategory"},on:{click:function(t){return t.stopPropagation(),e.addSubcategory(t)}}},[a("v-icon",{attrs:{small:""}},[e._v(e._s("mdi-plus"))])],1)]},proxy:!0}]),model:{value:e.newSubcategory,callback:function(t){e.newSubcategory=t},expression:"newSubcategory"}})],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"#787878"},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary",disabled:!e.tempCategory.name},on:{click:e.save}},[e._v("Save")])],1)],1)],1),a("snack-msg",{attrs:{options:e.snackOptions}})],1)},Ye=[],Le=(a("c975"),a("2909")),qe={categoryUrl:"http://localhost:3000/category/",maxTreeId:1,getCategories:function(){var e=this;return N.a.get(this.categoryUrl).then((function(t){return t.data&&t.data.length?(t.data.forEach((function(t){t.treeId=e.maxTreeId++,t.subcategories.forEach((function(a){a.treeId=e.maxTreeId++,a.parentTreeId=t.treeId}))})),t.data.sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0})),t.data):[]})).catch((function(e){return console.error("CategoryService.getCategories error:",e.response?e.response:e),Promise.reject(e.response)}))},createCategory:function(e){return N()({url:this.categoryUrl,method:"POST",data:e}).then((function(e){return e.data})).catch((function(e){return console.error("CategoryService.createCategory error",e.response?e.response:e),Promise.reject(e.response)}))},updateCategory:function(e){var t=JSON.parse(JSON.stringify(e));return delete t.treeId,delete t.parentTreeId,t.subcategories.forEach((function(e){delete e.treeId,delete e.parentTreeId})),N()({url:this.categoryUrl+e._id,method:"PUT",data:t}).then((function(e){return e.data})).catch((function(e){return console.error("CategoryService.updateCategory error",e.response?e.response:e),Promise.reject(e.response)}))},deleteCategory:function(e){return N()({url:this.categoryUrl+e,method:"DELETE"}).then((function(e){return e.data})).catch((function(e){return console.error("CategoryService.deleteCategory error",e.response?e.response:e),Promise.reject(e.response)}))},getCategoryInfo:function(){return this.getCategories().then((function(e){var t=e.map((function(e){return{_id:e._id,name:e.name}})),a=e.reduce((function(e,t){return e[t._id]=t,e}),{}),r=[];e.forEach((function(e){e.subcategories&&e.subcategories.length&&r.push.apply(r,Object(Le["a"])(e.subcategories))}));var o=r.reduce((function(e,t){return e[t.id]=t,e}),{});return{categories:e,selectCategories:t,categoryMap:a,subcategories:r,subcategoryMap:o}})).catch((function(e){return console.error("CategoryService.getCategoryInfo error",e.response?e.response:e),Promise.reject(e.response)}))},getCategorySelect:function(){return this.getCategories().then((function(e){var t=e.map((function(e){return{_id:e._id,name:e.name}}));return t})).catch((function(e){return console.error("CategoryService.getCategorySelect error",e.response?e.response:e),Promise.reject(e.response)}))},getCategoryMap:function(e){var t=e.reduce((function(e,t){return e[t._id]=t,e}),{});return t}},Fe=a("ec26"),Re=a("2162"),Ne=a.n(Re),ze={name:"UpdateCategoryDialog",props:{value:{type:Boolean,required:!0},category:{type:Object,required:!0}},data:function(){var e=this;return{selectedSubcategory:void 0,nameRules:[function(e){return!!e||"Category Name is required"},function(){return e.dialogMessage=null,e.isCategoryUnique||"Category Name is not unique"}],newSubcategory:void 0,tempCategory:Ne.a.cloneDeep(this.category),isCategoryUnique:!0,dialogMessage:null,snackOptions:{show:null,msg:null,color:"primary"}}},components:{SnackMsg:ee},methods:{save:function(){var e=this;this.dialogMessage=null,this.isCategoryUnique=!0,qe.updateCategory(this.tempCategory).then((function(){e.category.name=e.tempCategory.name,e.category.subcategories=e.tempCategory.subcategories,e.$emit("category-updated",e.category),e.close()})).catch((function(t){t&&t.data&&t.data.errmsg&&-1!==t.data.errmsg.indexOf("duplicate")?(e.isCategoryUnique=!1,e.$refs.form.validate()):(console.error("Error saving category:",t),e.dialogMessage="Error saving the Category")}))},close:function(){this.$emit("input",!1)},addSubcategory:function(){if(this.dialogMessage=null,this.newSubcategory){var e={id:Object(Fe["a"])(),name:this.newSubcategory,parentTreeId:this.tempCategory.treeId,matchText:[]};this.tempCategory.subcategories.push(e),this.newSubcategory=void 0,this.sortArray(this.tempCategory.subcategories,"name")}},deleteSubcategory:function(e,t){this.dialogMessage=null,this.tempCategory.subcategories.splice(t,1)}}},Pe=ze,Be=(a("5b6d"),a("b0af")),He=a("99d9"),Ge=a("169a"),Je=a("4bd4"),We=a("8860"),Ke=a("da13"),Xe=a("1800"),Qe=a("5d23"),Ze=a("1baa"),et=Object(T["a"])(Pe,Ae,Ye,!1,null,"5c9b7364",null),tt=et.exports;M()(et,{VBtn:$["a"],VCard:Be["a"],VCardActions:He["b"],VCardText:He["d"],VDialog:Ge["a"],VDivider:O["a"],VForm:Je["a"],VIcon:U["a"],VList:We["a"],VListItem:Ke["a"],VListItemAction:Xe["a"],VListItemContent:Qe["g"],VListItemGroup:Ze["a"],VListItemTitle:Qe["k"],VSpacer:A["a"],VTextField:ie["a"],VToolbar:Y["a"],VToolbarTitle:L["c"]});var at={name:"CategoryDetails",props:{category:{type:Object,required:!0}},data:function(){return{showCategoryDialog:!1}},components:{UpdateCategoryDialog:tt},methods:{showUpdateCategoryDialog:function(){this.showCategoryDialog=!0},categoryUpdated:function(){this.$emit("category-updated")}}},rt=at,ot=(a("c5f1"),a("62ad")),nt=a("0fd9"),st=Object(T["a"])(rt,Oe,Ue,!1,null,"50319c9a",null),it=st.exports;M()(st,{VBtn:$["a"],VCard:Be["a"],VCardText:He["d"],VCol:ot["a"],VIcon:U["a"],VRow:nt["a"],VSpacer:A["a"],VToolbar:Y["a"],VToolbarTitle:L["c"]});var ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{attrs:{height:"calc(100vh-100px)"}},[a("v-toolbar",{attrs:{dense:"",short:"",flat:"",color:"secondary"}},[a("v-toolbar-title",{staticClass:"details-title"},[e._v("Subcategory Details")]),a("v-spacer"),a("v-btn",{staticClass:"icon-btn",attrs:{small:"",dark:"",color:"primary",title:"Update Subcategory"},on:{click:e.showUpdateDialog}},[a("v-icon",{attrs:{small:""}},[e._v(e._s("mdi-pencil"))])],1)],1),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"3",xs:"6",sm:"6",md:"4"}},[a("label",{attrs:{for:"name"}},[e._v("Name:")])]),a("v-col",{attrs:{cols:"9",xs:"6",sm:"6",md:"8"}},[a("div",{attrs:{id:"name"}},[e._v(e._s(e.subcategory.name))])])],1),a("v-row",[a("v-col",{attrs:{cols:"3",xs:"6",sm:"6",md:"4"}},[a("label",{attrs:{for:"matchText"}},[e._v("Import Match Text:")])]),a("v-col",{attrs:{cols:"9",xs:"6",sm:"6",md:"8"}},e._l(e.subcategory.matchText,(function(t,r){return a("div",{key:r,attrs:{id:"matchText"}},[e._v(e._s(t))])})),0)],1)],1)],1),e.showSubcategoryDialog?a("update-subcategory-dialog",{attrs:{category:e.category,subcategory:e.subcategory},on:{"subcategory-updated":e.subcategoryUpdated},model:{value:e.showSubcategoryDialog,callback:function(t){e.showSubcategoryDialog=t},expression:"showSubcategoryDialog"}}):e._e()],1)},lt=[],ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{value:e.value,width:"500"},on:{"click:outside":function(t){return e.close()}}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[e._v("Update Subcategory")])],1),a("v-card-text",{staticClass:"dialog-content"},[a("v-form",{ref:"form"},[a("div",{staticClass:"dialog-error error--text"},[e._v(e._s(e.dialogMessage))]),a("v-text-field",{attrs:{dense:"",outlined:"",maxlength:"30",rules:e.nameRules,label:"Subcategory",required:""},model:{value:e.tempSubcategory.name,callback:function(t){e.$set(e.tempSubcategory,"name",t)},expression:"tempSubcategory.name"}}),a("fieldset",{staticClass:"text-mappings"},[a("legend",[e._v("Match Text")]),a("v-list",{staticClass:"overflow-y-auto",attrs:{dense:"",height:"150","max-height":"150"}},[a("v-list-item-group",{attrs:{ripple:"false"},model:{value:e.selectedMatchText,callback:function(t){e.selectedMatchText=t},expression:"selectedMatchText"}},e._l(e.tempSubcategory.matchText,(function(t,r){return a("v-list-item",{key:r},[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t))])],1),a("v-list-item-action",[a("v-btn",{attrs:{small:"",icon:"",color:"primary",title:"Delete Match Text"},on:{click:function(a){return a.stopPropagation(),e.deleteMatchText(t,r)}}},[a("v-icon",{attrs:{small:""}},[e._v(e._s("mdi-delete"))])],1)],1)],1)})),1)],1)],1),a("div",{staticClass:"new-text-mapping-container"},[a("v-spacer"),a("v-text-field",{attrs:{dense:"",outlined:"",label:"New Match Text"},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a("v-btn",{staticClass:"icon-btn",attrs:{small:"",dark:"",color:"primary",title:"Add Match Text"},on:{click:function(t){return t.stopPropagation(),e.addMatchText(t)}}},[a("v-icon",{attrs:{small:""}},[e._v(e._s("mdi-plus"))])],1)]},proxy:!0}]),model:{value:e.newMatchText,callback:function(t){e.newMatchText=t},expression:"newMatchText"}})],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"#787878"},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)},dt=[],pt={name:"UpdateSubcategoryDialog",props:{value:{type:Boolean,required:!0},category:{type:Object,required:!0},subcategory:{type:Object,required:!0}},data:function(){var e=this;return{dialogMessage:null,selectedMatchText:void 0,nameRules:[function(e){return!!e||"Subcategory Name is required"},function(){return e.dialogMessage=null,e.isSubcategoryUnique()||"Subcategory Name is not unique"}],newMatchText:void 0,tempCategory:Ne.a.cloneDeep(this.category),tempSubcategory:Ne.a.cloneDeep(this.subcategory)}},methods:{save:function(){var e=this;if(this.dialogMessage=null,this.isSubcategoryUnique()){var t=this.tempCategory.subcategories.findIndex((function(t){return t.name===e.subcategory.name}));-1!==t&&(this.tempCategory.subcategories[t]=this.tempSubcategory,this.sortArray(this.tempCategory.subcategories,"name"),qe.updateCategory(this.tempCategory).then((function(){e.$emit("subcategory-updated",e.tempCategory,e.tempSubcategory),e.close()})).catch((function(t){console.error("Error saving subcategory:",t),e.dialogMessage="Error saving the Subcategory"})))}else this.dialogMessage="Subcategory name is not unique"},isSubcategoryUnique:function(){var e=this;if(this.tempSubcategory.name.toLowerCase()===this.subcategory.name.toLowerCase())return!0;var t=this.tempCategory.subcategories.findIndex((function(t){return t.name.toLowerCase()===e.tempSubcategory.name.toLowerCase()}));return-1===t},close:function(){this.$emit("input",!1)},addMatchText:function(){var e=this;if(this.dialogMessage=null,this.newMatchText){this.tempSubcategory.matchText||(this.tempSubcategory.matchText=[]);var t=this.tempSubcategory.matchText.findIndex((function(t){return t.toLowerCase()===e.newMatchText.toLowerCase()}));-1===t&&(this.tempSubcategory.matchText.push(this.newMatchText),this.tempSubcategory.matchText.sort((function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}))),this.newMatchText=void 0}},deleteMatchText:function(e,t){this.dialogMessage=null,this.tempSubcategory.matchText.splice(t,1)}}},ft=pt,gt=(a("cc26"),Object(T["a"])(ft,ut,dt,!1,null,"65c56400",null)),mt=gt.exports;M()(gt,{VBtn:$["a"],VCard:Be["a"],VCardActions:He["b"],VCardText:He["d"],VDialog:Ge["a"],VDivider:O["a"],VForm:Je["a"],VIcon:U["a"],VList:We["a"],VListItem:Ke["a"],VListItemAction:Xe["a"],VListItemContent:Qe["g"],VListItemGroup:Ze["a"],VListItemTitle:Qe["k"],VSpacer:A["a"],VTextField:ie["a"],VToolbar:Y["a"],VToolbarTitle:L["c"]});var vt={name:"SubcategoryDetails",props:{category:{type:Object,required:!0},subcategory:{type:Object,required:!0}},data:function(){return{showSubcategoryDialog:!1}},components:{UpdateSubcategoryDialog:mt},methods:{showUpdateDialog:function(){this.showSubcategoryDialog=!0},subcategoryUpdated:function(e,t){this.$emit("subcategory-updated",e,t)}}},ht=vt,bt=(a("03d5"),Object(T["a"])(ht,ct,lt,!1,null,"2a080e8b",null)),yt=bt.exports;M()(bt,{VBtn:$["a"],VCard:Be["a"],VCardText:He["d"],VCol:ot["a"],VIcon:U["a"],VRow:nt["a"],VSpacer:A["a"],VToolbar:Y["a"],VToolbarTitle:L["c"]});var xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{value:e.value,width:"500"},on:{"click:outside":e.close}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[e._v("Add Category")])],1),a("v-card-text",{staticClass:"dialog-content"},[a("v-form",{ref:"form"},[a("div",{staticClass:"dialog-error error--text"},[e._v(e._s(e.dialogMessage))]),a("v-container",{staticClass:"form-container"},[a("v-row",[a("v-col",{staticClass:"category-col",attrs:{cols:"12",md:"12"}},[a("v-text-field",{ref:"name",attrs:{dense:"",outlined:"",required:"",maxlength:"30",label:"Category",rules:e.nameRules,spellcheck:"false",autocomplete:"off"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.addCategory(t))}},model:{value:e.categoryName,callback:function(t){e.categoryName=t},expression:"categoryName"}})],1)],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"#787878"},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.addCategory}},[e._v("Save")])],1)],1)],1)],1)},Ct=[],Dt={name:"AddCategoryDialog",props:{value:{type:Boolean,required:!0}},data:function(){var e=this;return{categoryName:void 0,valid:void 0,isCategoryUnique:!0,dialogMessage:null,nameRules:[function(e){return!!e||"Category Name is required"},function(){return e.isCategoryUnique||"Category Name is not unique"}]}},methods:{addCategory:function(){var e=this;this.isCategoryUnique=!0;var t={name:this.categoryName,subcategories:[]};qe.createCategory(t).then((function(){e.$emit("category-added",e.categoryName),e.close()})).catch((function(t){t&&t.data&&t.data.errmsg&&-1!==t.data.errmsg.indexOf("duplicate")?(e.isCategoryUnique=!1,e.$refs.form.validate()):(console.error("Error creating category:",t),e.dialogMessage="Error creating the Category")}))},close:function(){this.$emit("input",!1)}},mounted:function(){setTimeout(this.$refs.name.focus,0)}},kt=Dt,_t=(a("f4c1"),a("a523")),wt=Object(T["a"])(kt,xt,Ct,!1,null,"569b019b",null),Et=wt.exports;M()(wt,{VBtn:$["a"],VCard:Be["a"],VCardActions:He["b"],VCardText:He["d"],VCol:ot["a"],VContainer:_t["a"],VDialog:Ge["a"],VDivider:O["a"],VForm:Je["a"],VRow:nt["a"],VTextField:ie["a"],VToolbar:Y["a"],VToolbarTitle:L["c"]});var St=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.value?a("div",[a("v-dialog",{attrs:{value:e.value,width:"400"},on:{"click:outside":e.close}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[e._v("Add Subcategory")])],1),a("v-card-text",{staticClass:"dialog-content"},[a("v-form",{ref:"form"},[e.dialogMessage?a("div",{staticClass:"dialog-error error--text"},[e._v(e._s(e.dialogMessage))]):e._e(),a("v-container",{staticClass:"form-container"},[a("v-row",[a("v-col",{staticClass:"subcategory-col",attrs:{cols:"12",md:"12"}},[a("v-text-field",{ref:"name",attrs:{dense:"",outlined:"",required:"",maxlength:"30",rules:e.nameRules,label:"Subcategory",spellcheck:"false",autocomplete:"off"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.addSubcategory(t))}},model:{value:e.subcategoryName,callback:function(t){e.subcategoryName=t},expression:"subcategoryName"}})],1)],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"#787878"},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.addSubcategory}},[e._v("Save")])],1)],1)],1)],1):e._e()},jt=[],It={name:"AddSubcategoryDialog",props:{value:{type:Boolean,required:!0},category:{type:Object,required:!0}},data:function(){var e=this;return{subcategoryName:void 0,dialogMessage:null,isSubcategoryUnique:!0,nameRules:[function(e){return!!e||"Subcategory Name is required"},function(){return e.isSubcategoryUnique||"Subcategory Name is not unique"}]}},methods:{addSubcategory:function(){var e=this,t=Ne.a.cloneDeep(this.category);t.subcategories.push({id:Object(Fe["a"])(),name:this.subcategoryName,matchText:[]}),this.sortArray(t.subcategories,"name"),qe.updateCategory(t).then((function(){e.$emit("subcategory-added",e.category.name,e.subcategoryName),e.close()})).catch((function(t){t&&t.data&&t.data.errmsg&&-1!==t.data.errmsg.indexOf("duplicate")?(e.isSubcategoryUnique=!1,e.$refs.form.validate()):(console.error("Error creating subcategory:",t),e.dialogMessage="Error creating the Subcategory")}))},close:function(){this.$emit("input",!1)}},mounted:function(){setTimeout(this.$refs.name.focus,0)}},Tt=It,Vt=(a("5a61"),Object(T["a"])(Tt,St,jt,!1,null,"53381062",null)),Mt=Vt.exports;M()(Vt,{VBtn:$["a"],VCard:Be["a"],VCardActions:He["b"],VCardText:He["d"],VCol:ot["a"],VContainer:_t["a"],VDialog:Ge["a"],VDivider:O["a"],VForm:Je["a"],VRow:nt["a"],VTextField:ie["a"],VToolbar:Y["a"],VToolbarTitle:L["c"]});var $t={name:"Categories",data:function(){return{categories:[],currentCategory:null,currentSubcategory:null,parentCategory:null,activeCategories:[],openCategoryNames:[],openCategories:[],showCategoryDialog:!1,showSubcategoryDialog:!1,maxCategoryId:null,snackOptions:{show:null,msg:null,color:"error"}}},components:{PageHeader:Ee,CategoryDetails:it,SubcategoryDetails:yt,AddCategoryDialog:Et,AddSubcategoryDialog:Mt,SnackMsg:ee},computed:{isCategorySelected:function(){return this.currentCategory},isSubcategorySelected:function(){return this.currentSubcategory}},methods:{getCategories:function(){var e=this;qe.getCategories().then((function(t){e.categories=t,e.categories.length&&(e.activeCategories.push(e.categories[0]),e.currentCategory=e.categories[0])})).catch((function(t){console.error("Error retreiving categories:",t),e.$refs.snack.show("Error retrieving categories")}))},itemActivated:function(e){e&&e.length?this.isSubcategory(e[0])?(this.currentSubcategory=e[0],this.parentCategory=this.getParentCategory(this.currentSubcategory),this.currentCategory=null):(this.currentCategory=e[0],this.currentSubcategory=null,this.parentCategory=null):this.currentCategory&&(this.currentCategory?this.activeCategories.push(this.currentCategory):this.currentSubcategory&&this.activeCategories.push(this.currentSubcategory))},isSubcategory:function(e){return void 0!==e.parentTreeId},itemOpened:function(e){this.openCategories=e},deleteItem:function(){this.isSubcategorySelected?this.deleteSubcategory():this.deleteCategory()},deleteCategory:function(){var e=this;this.$confirm("Are you sure you want to delete category ".concat(this.currentCategory.name,"?"),{title:"Confirm Delete Category"}).then((function(t){t&&qe.deleteCategory(e.currentCategory._id).then((function(){e.refreshCategories()})).catch((function(t){console.error("Error deleting category:",t),console.error("Error deleting category2:",t.data),t&&t.data&&"Category in use"===t.data?e.$refs.snack.show("Category cannot be deleted because it is already assigned to expenses"):e.$refs.snack.show("Error deleting the category")}))}))},deleteSubcategory:function(){var e=this;this.$confirm("Are you sure you want to delete subcategory ".concat(this.currentSubcategory.name,"?"),{title:"Confirm Delete Subcategory"}).then((function(t){if(t){var a=e.categories.findIndex((function(t){return t.treeId===e.currentSubcategory.parentTreeId}));if(-1!==a){var r=e.categories[a];a=r.subcategories.findIndex((function(t){return t.treeId===e.currentSubcategory.treeId})),-1!==a&&r.subcategories.splice(a,1),qe.updateCategory(r).then((function(t){e.refreshCategories(t)})).catch((function(t){console.error("Error deleting subcategory:",t),e.$refs.snac.show("Error deleting the subcategory")}))}}}))},refreshCategories:function(e,t){var a=this;qe.getCategories().then((function(r){if(a.categories=r,a.currentCategory=null,a.currentSubcategory=null,e){var o=a.categories.findIndex((function(t){return t._id===e._id}));a.currentCategory=-1!==o?a.categories[o]:a.categories.length?a.categories[0]:null}else a.currentCategory=a.categories.length?a.categories[0]:null;if(t&&a.currentCategory){var n=a.currentCategory.subcategories.findIndex((function(e){return e.name===t.name}));-1!==n&&(a.currentSubcategory=a.currentCategory.subcategories[n],a.parentCategory=a.currentCategory,a.currentCategory=null)}a.activeCategories=a.categories.length?[a.currentCategory]:[],a.openCategories=a.categories.filter((function(e){return a.openCategories.filter((function(t){return t._id===e._id})).length>0}))})).catch((function(e){console.error("Error retrieving categories:",e),a.$refs.snack.show("Error retrieving the categories")}))},getParentCategory:function(e){var t=this.categories.findIndex((function(t){return t.treeId===e.parentTreeId}));return-1!==t?this.categories[t]:{}},expandAllCategories:function(){this.$refs.treeviewRef.updateAll(!0)},collapseAllCategories:function(){this.$refs.treeviewRef.updateAll(!1)}},created:function(){this.getCategories()}},Ot=$t,Ut=(a("f207"),a("eb2a")),At=Object(T["a"])(Ot,Me,$e,!1,null,"b685a2d8",null),Yt=At.exports;M()(At,{VBtn:$["a"],VCard:Be["a"],VCardText:He["d"],VCol:ot["a"],VDivider:O["a"],VIcon:U["a"],VList:We["a"],VListItem:Ke["a"],VListItemTitle:Qe["k"],VMenu:se["a"],VRow:nt["a"],VSpacer:A["a"],VToolbar:Y["a"],VTreeview:Ut["a"]});var Lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("page-header",{attrs:{title:"Manage Expenses"}}),a("div",{staticClass:"page-content table-content"},[a("table-filter",{scopedSlots:e._u([{key:"inputs",fn:function(){return[a("date-range-input",{attrs:{"date-range":e.filter},on:{"date-range-changed":e.filterChanged}}),a("category-select",{attrs:{items:e.selectCategories,label:"Category"},on:{change:e.filterChanged},model:{value:e.filter.categoryIds,callback:function(t){e.$set(e.filter,"categoryIds",t)},expression:"filter.categoryIds"}})]},proxy:!0},{key:"actions",fn:function(){return[a("v-btn",{staticClass:"icon-btn create-expense-btn",attrs:{small:"",dark:"",color:"primary",title:"Create New Expense"},on:{click:e.showAddExpenseDialog}},[a("v-icon",{attrs:{small:""}},[e._v(e._s("mdi-plus"))])],1)]},proxy:!0}])}),a("div",{staticClass:"table-container"},[a("v-data-table",{attrs:{headers:e.headers,items:e.expenses,"item-key":"_id","sort-by":e.sortBy,"sort-desc":e.sortDesc,"disable-pagination":"","hide-default-footer":"","must-sort":""},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},"click:row":e.rowClicked},scopedSlots:e._u([{key:"item.amount",fn:function(t){var r=t.item;return[a("span",[e._v(e._s(e._f("formatAmount")(r.amount)))])]}},{key:"item.actions",fn:function(t){var r=t.item;return[a("v-icon",{staticClass:"mr-3",attrs:{small:"",color:"primary"},on:{click:function(t){return e.updateExpense(r)}}},[e._v("mdi-pencil")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteExpense(r)}}},[e._v("mdi-delete")])]}},{key:"no-data",fn:function(){return[a("div",[e._v("No Data")])]},proxy:!0}])})],1),a("div",{staticClass:"table-footer"},[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("span",[e._v(e._s(e.expenses.length)+" "+e._s(e.rowText))])])],1)],1),e.showExpenseDialog?a("expense-dialog",{attrs:{expense:e.selectedExpense},on:{"expense-updated":e.getExpenses},model:{value:e.showExpenseDialog,callback:function(t){e.showExpenseDialog=t},expression:"showExpenseDialog"}}):e._e(),a("snack-msg",{ref:"snack",attrs:{options:e.snackOptions}})],1)},qt=[],Ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.value?a("div",[a("v-dialog",{staticClass:"expense-dialog",attrs:{"retain-focus":"",value:e.value,width:"500"},on:{"click:outside":function(t){return e.$emit("input",!1)}}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[e._v(e._s(e.dialogTitle))])],1),a("v-divider"),a("v-card-text",{staticClass:"dialog-content"},[a("v-form",{ref:"form",model:{value:e.isFormValid,callback:function(t){e.isFormValid=t},expression:"isFormValid"}},[a("div",{staticClass:"dialog-error error--text"},[e._v(e._s(e.dialogMessage))]),a("v-menu",{staticClass:"form-item",attrs:{"offset-y":"",bottom:"","close-on-content-click":!0,transition:"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({ref:"trxDate",staticClass:"trxDate",attrs:{outlined:"",readonly:"",dense:"",required:"","background-color":"#ffffff",label:"Expense Date",maxlength:10,rules:[e.ruleRequired],spellcheck:"false",autocomplete:"off",autofocus:""},model:{value:e.tempExpense.trxDate,callback:function(t){e.$set(e.tempExpense,"trxDate",t)},expression:"tempExpense.trxDate"}},r))]}}],null,!1,2173379547),model:{value:e.trxDateMenu,callback:function(t){e.trxDateMenu=t},expression:"trxDateMenu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:"","header-color":"primary"},model:{value:e.tempExpense.trxDate,callback:function(t){e.$set(e.tempExpense,"trxDate",t)},expression:"tempExpense.trxDate"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.startDateMenu=!1}}},[e._v("Cancel")])],1)],1),a("v-text-field",{staticClass:"description",attrs:{dense:"",outlined:"",required:"",label:"Description",rules:[e.ruleRequired]},model:{value:e.tempExpense.description,callback:function(t){e.$set(e.tempExpense,"description",t)},expression:"tempExpense.description"}}),a("v-select",{staticClass:"form-item category",attrs:{dense:"",outlined:"",required:"",items:e.categories,"item-text":"name","item-value":"_id",label:"Category","background-color":"#ffffff","menu-props":"offset-y, bottom",rules:[e.ruleRequired]},on:{change:e.categorySelected},model:{value:e.tempExpense.categoryId,callback:function(t){e.$set(e.tempExpense,"categoryId",t)},expression:"tempExpense.categoryId"}}),a("v-select",{staticClass:"form-item subcategory",attrs:{dense:"",outlined:"",required:"",items:e.subcategories,"item-text":"name","item-value":"id",label:"Subcategory","background-color":"#ffffff","menu-props":"offset-y, bottom",rules:[e.ruleRequired]},model:{value:e.tempExpense.subcategoryId,callback:function(t){e.$set(e.tempExpense,"subcategoryId",t)},expression:"tempExpense.subcategoryId"}}),a("v-text-field",{staticClass:"form-item amount",attrs:{dense:"",outlined:"",required:"",label:"Amount",rules:[e.ruleRequired]},model:{value:e.tempExpense.amount,callback:function(t){e.$set(e.tempExpense,"amount",t)},expression:"tempExpense.amount"}})],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{staticClass:"cancel-button",attrs:{text:"",color:"#787878"},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{staticClass:"save-button",attrs:{text:"",color:"primary"},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1):e._e()},Rt=[],Nt={name:"ExpenseDialog",props:{value:{type:Boolean,required:!0},expense:{type:Object,required:!0}},data:function(){return{isFormValid:void 0,isCreate:!0,trxDateMenu:!1,tempExpense:Ne.a.cloneDeep(this.expense),categories:[],subcategories:[],categoryMap:{},dialogMessage:null,snackOptions:{show:null,msg:null,color:"primary"}}},computed:{dialogTitle:function(){return void 0===this.expense._id?"Create Expense":"Update Expense"}},methods:{getCategories:function(){var e=this;qe.getCategories().then((function(t){e.categories=t,e.categoryMap=qe.getCategoryMap(t),e.tempExpense.categoryId&&(e.selectedCategory=e.categoryMap[e.tempExpense.categoryId],e.subcategories=e.selectedCategory.subcategories)})).catch((function(t){console.error("Error retrieving categories:",t),e.dialogMessage="Error retrieving the categories"}))},save:function(){var e=this;this.$refs.form.validate()&&G.saveExpense(this.tempExpense).then((function(){e.$emit("expense-updated",e.tempExpense),e.close()})).catch((function(t){console.error("Error saving expense:",t),e.dialogMessage="Error saving the expense"}))},categorySelected:function(e){var t=this.categoryMap[e];t&&(this.subcategories=t.subcategories)},close:function(){this.$emit("input",!1)}},created:function(){this.tempExpense.trxDate&&(this.tempExpense.trxDate=P()(this.tempExpense.trxDate).format("YYYY-MM-DD")),this.getCategories()}},zt=Nt,Pt=(a("b5d1"),a("b974")),Bt=Object(T["a"])(zt,Ft,Rt,!1,null,"5c4bf6a4",null),Ht=Bt.exports;M()(Bt,{VBtn:$["a"],VCard:Be["a"],VCardActions:He["b"],VCardText:He["d"],VDatePicker:ne["a"],VDialog:Ge["a"],VDivider:O["a"],VForm:Je["a"],VMenu:se["a"],VSelect:Pt["a"],VSpacer:A["a"],VTextField:ie["a"],VToolbar:Y["a"],VToolbarTitle:L["c"]});var Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"filter-container"},[a("v-toolbar",{staticClass:"filter",attrs:{flat:"",color:"#ffffff"}},[e._t("inputs"),a("v-spacer"),e._t("actions")],2)],1)},Jt=[],Wt={name:"TableFilter"},Kt=Wt,Xt=(a("8e7b"),Object(T["a"])(Kt,Gt,Jt,!1,null,"37a9a45e",null)),Qt=Xt.exports;M()(Xt,{VSpacer:A["a"],VToolbar:Y["a"]});var Zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"filter-input"},[a("v-select",{staticClass:"category-select",attrs:{multiple:"",dense:"",outlined:"","hide-details":"",clearable:"",items:e.items,label:e.label,"background-color":"#ffffff","menu-props":"offset-y, bottom","item-text":e.itemText,"item-value":e.itemValue},on:{change:e.handleChange,input:e.handleInput},scopedSlots:e._u([{key:"selection",fn:function(t){var r=t.item,o=t.index;return[0===o?a("span",[e._v(e._s(r.name))]):e._e(),1===o?a("span",{staticClass:"other-count"},[e._v("(+"+e._s(e.selectedValues.length-1)+")")]):e._e()]}}]),model:{value:e.selectedValues,callback:function(t){e.selectedValues=t},expression:"selectedValues"}})],1)},ea=[],ta={name:"CategorySelect",props:{value:{type:Array,required:!0},label:{type:String,requied:!0},items:{type:Array,required:!0},itemText:{type:String,default:"name"},itemValue:{type:String,default:"_id"}},data:function(){return{selectedValues:null}},methods:{handleChange:function(){this.$emit("change",this.selectedValues)},handleInput:function(){this.$emit("input",this.selectedValues)}}},aa=ta,ra=(a("41d2"),Object(T["a"])(aa,Zt,ea,!1,null,"c8d6cc32",null)),oa=ra.exports;M()(ra,{VSelect:Pt["a"]});var na={name:"Expenses",data:function(){return{showExpenseDialog:!1,selectedExpense:{},newExpense:{},sortBy:"trxDate",sortDesc:!0,expenses:[],categories:[],selectCategories:[],filter:{startDate:P()().startOf("year").format("YYYY-MM-DD"),endDate:P()().format("YYYY-MM-DD"),categoryIds:[]},headers:[{value:"trxDate",text:"Date",align:"start"},{value:"description",text:"Description"},{value:"categoryName",text:"Category"},{value:"subcategoryName",text:"Subcategory"},{value:"amount",text:"Amount",align:"end"},{value:"actions",text:"Actions",sortable:!1}],snackOptions:{show:null,msg:null,color:"error"}}},components:{PageHeader:Ee,ExpenseDialog:Ht,SnackMsg:ee,TableFilter:Qt,DateRangeInput:le,CategorySelect:oa},computed:{rowText:function(){return 1!==this.expenses.length?"rows":"row"}},methods:{getExpenses:function(){var e=this;return G.getExpenses(this.filter,this.categoryMap).then((function(t){e.expenses=t})).catch((function(t){console.error("Error retrieving expenses:",t),e.$refs.snack.show("Error retrieving the expense data")}))},getCategorySelect:function(){var e=this;return qe.getCategorySelect().then((function(t){e.selectCategories=t})).catch((function(t){return console.error("Error retrieving category select:",t),e.$refs.snack.show("Error retrieving category select data"),Promise.reject(t)}))},filterChanged:function(){this.getCategorySelect(),this.getExpenses()},rowClicked:function(e){this.selectedExpense=e},showAddExpenseDialog:function(){this.showExpenseDialog=!0,this.selectedExpense={trxDate:null,categoryId:null,subcategoryId:null,amount:null}},updateExpense:function(e){this.selectedExpense=e,this.showExpenseDialog=!0},deleteExpense:function(e){var t=this;this.$confirm("Are you sure you want to delete expense ".concat(e.amount,"?"),{title:"Confirm Delete Expense"}).then((function(a){a&&G.deleteExpense(e._id).then((function(){t.getExpenses()})).catch((function(e){console.error("Error deleting expenses:",e),t.$refs.snack.show("Error deleting the expense")}))}))}},mounted:function(){this.getCategorySelect(),this.getExpenses()}},sa=na,ia=(a("bf27"),a("8fea")),ca=Object(T["a"])(sa,Lt,qt,!1,null,"2360f34c",null),la=ca.exports;M()(ca,{VBtn:$["a"],VDataTable:ia["a"],VIcon:U["a"],VToolbar:Y["a"]});var ua=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("page-header",{attrs:{title:"Expense Summary"}}),a("div",{staticClass:"page-content table-content"},[a("table-filter",{scopedSlots:e._u([{key:"inputs",fn:function(){return[a("date-range-input",{attrs:{"date-range":e.filter},on:{"date-range-changed":e.filterChanged}}),a("category-select",{attrs:{items:e.selectCategories,label:"Category"},on:{change:e.filterChanged},model:{value:e.filter.categoryIds,callback:function(t){e.$set(e.filter,"categoryIds",t)},expression:"filter.categoryIds"}})]},proxy:!0}])}),a("div",{staticClass:"table-container"},[a("v-data-table",{attrs:{headers:e.headers,items:e.expenseTotals,"item-key":"categoryName","sort-by":e.sortBy,"sort-desc":e.sortDesc,expanded:e.expanded,"single-expand":e.singleExpand,"disable-pagination":"","hide-default-footer":"","show-expand":"","must-sort":""},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},"update:expanded":function(t){e.expanded=t},"click:row":e.rowClicked},scopedSlots:e._u([{key:"item.categoryName",fn:function(t){var r=t.item;return[r.categoryName?e._e():a("span",[e._v("Unknown")]),r.categoryName?a("span",[e._v(e._s(r.categoryName))]):e._e()]}},{key:"item.totalAmount",fn:function(t){var r=t.item;return[a("span",[e._v(e._s(e._f("formatAmount")(r.totalAmount)))])]}},{key:"item.percent",fn:function(t){var r=t.item;return[a("span",[e._v(e._s(e._f("formatAmount")(r.percent)))])]}},{key:"no-data",fn:function(){return[a("div",[e._v("No Data")])]},proxy:!0},{key:"expanded-item",fn:function(t){t.headers;var r=t.item;return[a("td",{staticClass:"expanded-area",attrs:{colspan:"4"}},[a("table",{staticClass:"subcategory-table"},[a("tbody",e._l(r.subcategoryTotals,(function(t,r){return a("tr",{key:r},[a("td"),a("td",[e._v(e._s(t.subcategoryName||"Unknown"))]),a("td",{staticClass:"subcategory-amount text-right"},[e._v(e._s(e._f("formatAmount")(t.totalAmount)))])])})),0)]),r.subcategoryTotals.length?e._e():a("div",{staticClass:"no-subcategories"},[e._v(" No Subcategory Data ")])])]}}])})],1),a("div",{staticClass:"table-footer",staticStyle:{position:"relative"}},[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("span",[e._v(e._s(e.expenseTotals.length)+" "+e._s(e.rowText))]),a("v-spacer"),a("span",[e._v("Total Amount: "+e._s(e._f("formatAmount")(e.totalExpensesAmount)))])],1)],1)],1),a("snack-msg",{ref:"snack",attrs:{options:e.snackOptions}})],1)},da=[],pa={name:"ExpenseSummary",data:function(){return{singleExpand:!0,expanded:[],expenseTotals:[],totalExpensesAmount:null,selectedExpense:{},sortBy:"categoryName",sortDesc:!1,expenses:[],categories:[],selectCategories:[],filter:{startDate:P()().startOf("year").format("YYYY-MM-DD"),endDate:P()().format("YYYY-MM-DD"),categoryIds:[]},headers:[{value:"categoryName",text:"Category"},{value:"percent",text:"Percent",align:"end"},{value:"totalAmount",text:"Amount",align:"end"},{value:"data-table-expand",text:""}],snackOptions:{show:null,msg:null,color:"error"}}},components:{PageHeader:Ee,SnackMsg:ee,TableFilter:Qt,DateRangeInput:le,CategorySelect:oa},computed:{rowText:function(){return 1!==this.expenseTotals.length?"rows":"row"}},methods:{getExpenseTotals:function(){var e=this;G.getExpenseTotals(this.filter).then((function(t){e.expenseTotals=t,e.expanded.shift(),e.totalExpensesAmount=t.reduce((function(e,t){return e+Number(t.totalAmount)}),0)})).catch((function(t){console.error("Error retrieving expense totals:",t),e.$refs.snack.show("Error retrieving expense summary data")}))},getCategorySelect:function(){var e=this;return qe.getCategorySelect().then((function(t){e.selectCategories=t})).catch((function(t){return console.error("Error retrieving category select:",t),e.$refs.snack.show("Error retrieving category select data"),Promise.reject(t)}))},filterChanged:function(){this.getCategorySelect(),this.getExpenseTotals()},rowClicked:function(e){this.expanded.length&&this.expanded[0]===e?this.expanded.shift():(this.expanded.shift(),this.expanded.push(e))}},mounted:function(){this.getCategorySelect(),this.getExpenseTotals()}},fa=pa,ga=(a("42a8"),Object(T["a"])(fa,ua,da,!1,null,"6378725a",null)),ma=ga.exports;M()(ga,{VDataTable:ia["a"],VSpacer:A["a"],VToolbar:Y["a"]});var va=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("page-header",{attrs:{title:"Import Expenses"}}),a("div",{staticClass:"page-content table-content"},[a("table-filter",{scopedSlots:e._u([{key:"inputs",fn:function(){return[a("date-range-input",{attrs:{"date-range":e.filter},on:{"date-range-changed":e.filterChanged}})]},proxy:!0},{key:"actions",fn:function(){return[a("v-btn",{staticClass:"icon-btn import-expenses-btn",attrs:{small:"",dark:"",color:"primary",title:"Import Expenses"},on:{click:e.showImportDialog}},[a("v-icon",{attrs:{small:""}},[e._v(e._s("mdi-publish"))])],1)]},proxy:!0}])}),a("div",{staticClass:"table-container"},[a("v-data-table",{attrs:{headers:e.headers,items:e.imports,"item-key":"_id","sort-by":e.sortBy,"sort-desc":e.sortDesc,"disable-pagination":"","hide-default-footer":"","must-sort":""},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"item.recordCount",fn:function(t){var r=t.item;return[a("div",{staticClass:"text-right"},[e._v(e._s(r.recordCount))])]}},{key:"item.actions",fn:function(t){var r=t.item;return[a("v-icon",{attrs:{small:"",title:"Delete import and associated expenses"},on:{click:function(t){return e.deleteImportedExpenses(r)}}},[e._v("mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("div",[e._v("No Data")])]},proxy:!0}])})],1),a("div",{staticClass:"table-footer"},[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("span",[e._v(e._s(e.imports.length)+" "+e._s(e.rowText))])])],1)],1),e.showDialog?a("import-dialog",{on:{"file-imported":e.getImports},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):e._e(),a("snack-msg",{ref:"snack",attrs:{options:e.snackOptions}})],1)},ha=[],ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{persistent:"",value:e.value,width:"750","content-class":"import-dialog"},on:{"click:outside":function(t){return e.$emit("input",!1)}}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[e._v("Import Expenses")])],1),a("v-divider"),a("v-card-text",{staticClass:"dialog-content"},[a("div",{staticClass:"dialog-error error--text"},[e._v(e._s(e.dialogMessage))]),a("v-form",{ref:"form",model:{value:e.isFormValid,callback:function(t){e.isFormValid=t},expression:"isFormValid"}},[a("v-container",{staticClass:"form-container"},[a("v-row",[a("v-col",{staticClass:"form-col",attrs:{cols:"12",sm:"6"}},[a("v-card",{staticClass:"fill-height",attrs:{flat:"",outlined:""}},[a("v-toolbar",{attrs:{dense:"",flat:"",color:"secondary"}},[a("v-toolbar-title",[e._v("File Info")])],1),a("v-divider"),a("v-card-text",{staticClass:"card-text"},[a("v-file-input",{attrs:{dense:"",outlined:"",required:"",label:"File Name",rules:[e.ruleRequired]},model:{value:e.fileInfo.csvFile,callback:function(t){e.$set(e.fileInfo,"csvFile",t)},expression:"fileInfo.csvFile"}}),a("v-text-field",{attrs:{dense:"",outlined:"",required:"",label:"Description",rules:[e.ruleRequired]},model:{value:e.fileInfo.description,callback:function(t){e.$set(e.fileInfo,"description",t)},expression:"fileInfo.description"}}),a("v-select",{attrs:{dense:"",outlined:"",label:"Date Format",items:e.dateFormats,rules:[e.ruleRequired]},model:{value:e.fileInfo.dateFormat,callback:function(t){e.$set(e.fileInfo,"dateFormat",t)},expression:"fileInfo.dateFormat"}}),a("v-checkbox",{staticClass:"has-header-row-checkbox",attrs:{label:"Expenses are Negative"},model:{value:e.fileInfo.negativeExpenses,callback:function(t){e.$set(e.fileInfo,"negativeExpenses",t)},expression:"fileInfo.negativeExpenses"}})],1)],1)],1),a("v-col",{staticClass:"form-col",attrs:{cols:"12",sm:"6"}},[a("v-card",{staticClass:"fill-height",attrs:{flat:"",outlined:""}},[a("v-toolbar",{attrs:{dense:"",flat:"",color:"secondary"}},[a("v-toolbar-title",[e._v("File Structure")])],1),a("v-divider"),a("v-card-text",{staticClass:"card-text"},[a("v-select",{attrs:{dense:"",outlined:"",required:"",label:"Date Field Position",items:e.fieldPositions,rules:[e.ruleRequired]},model:{value:e.fileStructure.dateFormatField,callback:function(t){e.$set(e.fileStructure,"dateFormatField",t)},expression:"fileStructure.dateFormatField"}}),a("v-select",{attrs:{dense:"",outlined:"",required:"",label:"Amount Field Position",items:e.fieldPositions,rules:[e.ruleRequired]},model:{value:e.fileStructure.amountField,callback:function(t){e.$set(e.fileStructure,"amountField",t)},expression:"fileStructure.amountField"}}),a("v-select",{attrs:{dense:"",outlined:"",required:"",label:"Description Field Position",items:e.fieldPositions,rules:[e.ruleRequired]},model:{value:e.fileStructure.descriptionField,callback:function(t){e.$set(e.fileStructure,"descriptionField",t)},expression:"fileStructure.descriptionField"}})],1)],1)],1)],1)],1)],1)],1),a("v-divider"),a("v-card-actions",{staticClass:"card-actions"},[a("v-btn",{attrs:{text:"",color:"#787878"},on:{click:e.cancel}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary",disabled:!e.initialized},on:{click:e.importExpenses}},[e._v("Import")])],1)],1)],1)],1)},ya=[],xa=(a("a4d3"),a("e01a"),a("9129"),a("4d63"),a("ac1f"),a("466d"),a("5319"),a("1276"),a("96cf"),a("1da1")),Ca={name:"ImportDialog",props:{value:{type:Boolean,required:!0}},data:function(){return{initialized:!1,isFormValid:void 0,fileInfo:{csvFile:null,dateFormat:null,negativeExpenses:!1},fileStructure:{hasHeaderRow:!0,dateFormatField:null,amountField:null,descriptionField:null},dialogMessage:null,importRecords:[],expenses:[],parsedExpense:{trxDate:null,amount:null,description:null},dateFormats:[{value:"YYYY-MM-DD",text:"YYYY-MM-DD"},{value:"MM-DD-YYYY",text:"MM-DD-YYYY"}],fieldPositions:[{value:1,text:"1"},{value:2,text:"2"},{value:3,text:"3"},{value:4,text:"4"},{value:5,text:"5"},{value:6,text:"6"},{value:7,text:"7"},{value:8,text:"8"},{value:9,text:"9"},{value:10,text:"10"}]}},methods:{importExpenses:function(){var e=this;return Object(xa["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,e.dialogMessage=null,e.expenses=[],e.$refs.form.validate()){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.readImportFile().then((function(t){e.importRecords=t})).catch((function(t){console.error("Error importing file:",t),e.dialogMessage="Unable to import the file"}));case 7:if(e.importRecords.length){t.next=10;break}return e.dialogMessage="No records to import",t.abrupt("return");case 10:e.parsedExpense=e.getExpenseObject(e.importRecords[e.fileStructure.hasHeaderRow?1:0],!1),e.parsedExpense?(r="".concat("<div>Parsed fields from the first record are displayed below.  Are you sure you want to continue the import?</div><br/><div><label style='font-weight: bold;'>Date: </label><span>").concat(a.parsedExpense.trxDate,"</span></div>")+"<div><label style='font-weight: bold;'>Amount: </label><span>".concat(a.parsedExpense.amount,"</span></div>")+"<div><label style='font-weight: bold;'>Desc: </label><span>".concat(a.parsedExpense.description,"</span></div>"),e.$confirm(r,{title:"Confirm Import",width:500}).then((function(t){if(t){e.importRecords.forEach((function(t,a){if(!e.fileStructure.hasHeaderRow||a>0){var r=e.getExpenseObject(t);r&&e.expenses.push(r)}}));var a={importDate:P()().format("YYYY-MM-DD"),fileName:e.fileInfo.csvFile.name,description:e.fileInfo.description,recordCount:e.expenses.length};G.importExpenses(e.expenses,a).then((function(){e.$emit("file-imported"),e.$emit("input",!1)})).catch((function(t){console.error("Error importing expenses:",t),e.dialogMessage="Error importing expenses"}))}}))):e.dialogMessage="Unable to parse first import file record";case 12:case"end":return t.stop()}}),t)})))()},readImportFile:function(){var e=this;return new Promise((function(t,a){var r=new FileReader;r.onload=function(){var e=r.result.split("\n");t(e)},r.onerror=function(){console.error("Unable to read import file: ".concat(r.error)),a("Unable to read import file: ".concat(r.error))},r.readAsText(e.fileInfo.csvFile)}))},getExpenseObject:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=e.split(",");if(a.length){var r=this.normalizeExpense(a);return t&&!this.validate(r)?null:(r.description&&this.categories.forEach((function(e){e.subcategories&&e.subcategories.forEach((function(t){t.matchText&&t.matchText.forEach((function(a){var o=new RegExp(a,"i");r.description.match(o)&&(r.categoryId=e._id,r.subcategoryId=t.id)}))}))})),r)}return null},normalizeExpense:function(e){var t={trxDate:e[this.fileStructure.dateFormatField-1],description:e[this.fileStructure.descriptionField-1],amount:e[this.fileStructure.amountField-1],categoryId:null,subcategoryId:null};return"string"===typeof t.trxDate&&(t.trxDate=t.trxDate.replace(/"/g,"")),"string"===typeof t.description&&(t.description=t.description.replace(/"/g,"")),"string"===typeof t.amount&&(t.amount=t.amount.replace(/"/g,"")),"string"===typeof t.amount&&"("===t.amount.substr(0,1)&&(t.amount.replace(/^\(/,"-"),t.amount.replace(/\)/g,"")),"string"===typeof t.amount&&"$"===t.amount.substr(0,1)&&(t.amount=t.amount.substr(1)),t.amount=Number(t.amount),this.fileInfo.negativeExpenses&&(t.amount*=-1),t},validate:function(e){return!!this.isValidAmount(e.amount)&&!!this.isValidDate(e.trxDate,this.fileInfo.dateFormat)},isValidAmount:function(e){return!(void 0===e||null===e||e<=0||Number.isNaN(e))||(console.error("Invalid amount:",e),!1)},isValidDate:function(e,t){return!!P()(e,t)||(console.error("Invalid date:",e,"format:",t),!1)},cancel:function(){this.$emit("input",!1)}},created:function(){var e=this;qe.getCategories().then((function(t){e.categories=t,e.initialized=!0})).catch((function(t){e.dialogMessage="Error retrieving categories, import can continue but categories/subcategory will not be added to imported expenses",console.error("Error retrieving categories from import dialog:",t)}))}},Da=Ca,ka=(a("8062"),a("ac7c")),_a=a("23a7"),wa=Object(T["a"])(Da,ba,ya,!1,null,"5e10f62d",null),Ea=wa.exports;M()(wa,{VBtn:$["a"],VCard:Be["a"],VCardActions:He["b"],VCardText:He["d"],VCheckbox:ka["a"],VCol:ot["a"],VContainer:_t["a"],VDialog:Ge["a"],VDivider:O["a"],VFileInput:_a["a"],VForm:Je["a"],VRow:nt["a"],VSelect:Pt["a"],VTextField:ie["a"],VToolbar:Y["a"],VToolbarTitle:L["c"]});var Sa={importUrl:"http://localhost:3000/import",getImports:function(e){return N.a.get(this.importUrl,{params:{startDate:e.startDate,endDate:e.endDate}}).then((function(e){var t=e.data;return t})).catch((function(e){return console.error("ImportService.getImports error:",e.response?e.response:e),Promise.reject(e.response)}))},deleteImport:function(e){return N()({url:this.importUrl+e,method:"DELETE"}).then((function(e){return e.data})).catch((function(e){return console.error("ImportService.deleteImport error",e.response?e.response:e),Promise.reject(e.response)}))}},ja={name:"Imports",data:function(){return{showDialog:!1,filter:{startDate:P()().startOf("year").format("YYYY-MM-DD"),endDate:P()().format("YYYY-MM-DD")},sortBy:"importDate",sortDesc:!0,imports:[],headers:[{value:"importDate",text:"Date",align:"start"},{value:"fileName",text:"File Name"},{value:"description",text:"Description"},{value:"recordCount",text:"Records",width:"100px",align:"right"},{value:"actions",text:"Actions",sortable:!1}],snackOptions:{show:null,msg:null,color:"error"}}},components:{PageHeader:Ee,ImportDialog:Ea,SnackMsg:ee,TableFilter:Qt,DateRangeInput:le},computed:{rowText:function(){return 1!==this.imports.length?"rows":"row"}},methods:{getImports:function(){var e=this;Sa.getImports(this.filter).then((function(t){e.imports=t})).catch((function(t){console.error("Error retrieving imports:",t),e.$refs.snack.show("Error retrieving imports")}))},showImportDialog:function(){this.showDialog=!0},filterChanged:function(){this.getImports()},deleteImportedExpenses:function(e){var t=this;this.$confirm("Are you sure you want to delete all ".concat(e.recordCount," expenses associated with this import?"),{title:"Confirm Delete Imported Expenses"}).then((function(a){a&&G.deleteExpensesByImportId(e._id).then((function(){t.getImports()})).catch((function(e){console.error("Error deleting imported expenses:",e),t.$refs.snack.show("Error deleting the imported expenses")}))}))}},mounted:function(){this.getImports()}},Ia=ja,Ta=(a("28ef"),Object(T["a"])(Ia,va,ha,!1,null,"d6afabd2",null)),Va=Ta.exports;M()(Ta,{VBtn:$["a"],VDataTable:ia["a"],VIcon:U["a"],VToolbar:Y["a"]});var Ma=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("page-header",{attrs:{title:"Login"}}),a("div",{staticClass:"page-content"},[a("v-form",{ref:"form",staticClass:"form",attrs:{noValidate:"",autoComplete:"off"}},[a("v-select",{attrs:{dense:"",outlined:"",required:"",items:e.users,"item-text":"id","item-value":"id",label:"Users","background-color":"#ffffff","menu-props":"offset-y, bottom",rules:[e.ruleRequired]},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}}),a("v-btn",{staticClass:"login-button",attrs:{raised:"",color:"primary"},on:{click:e.login}},[e._v("Login")])],1)],1)],1)},$a=[],Oa={userUrl:"http://localhost:3000/user/",getUsers:function(){return N.a.get(this.userUrl).then((function(e){return e.data})).catch((function(e){return console.error("ExpenseService.getExpenses error:",e.response?e.response:e),Promise.reject(e.response)}))},getUser:function(e){return N.a.get(this.userUrl+e).then((function(e){return e.data})).catch((function(e){return console.error("UserService.getUser error:",e.response?e.response:e),Promise.reject(e.response)}))}},Ua={name:"Login",data:function(){return{userId:null,users:[],isFormValid:!0}},components:{PageHeader:Ee},methods:{getUsers:function(){var e=this;Oa.getUsers().then((function(t){e.users=t}))},login:function(){var e=this;this.$refs.form.validate()&&this.$store.dispatch("login",this.userId).then((function(){e.$router.push({name:"Dashboard"}).catch((function(e){console.error("Error routing to Dashboard after login:",e)}))}))}},created:function(){this.getUsers()}},Aa=Ua,Ya=(a("1dfb"),Object(T["a"])(Aa,Ma,$a,!1,null,"7d6298cc",null)),La=Ya.exports;M()(Ya,{VBtn:$["a"],VForm:Je["a"],VSelect:Pt["a"]}),r["default"].use(b["a"]);var qa=[{path:"/",redirect:{name:"Dashboard"},meta:{hidden:!0}},{name:"Login",path:"/login",meta:{hidden:!0},component:La},{name:"Dashboard",path:"/dashboard",meta:{icon:"mdi-home"},component:Ve},{name:"Categories",path:"/categories",meta:{icon:"mdi-shape"},component:Yt},{name:"Manage Expenses",path:"/expenses",meta:{icon:"mdi-credit-card-outline"},component:la},{name:"Expense Summary",path:"/expenseSummary",meta:{icon:"mdi-credit-card-outline"},component:ma},{name:"Import Expenses",path:"/imports",meta:{icon:"mdi-publish"},component:Va}],Fa=new b["a"]({routes:qa}),Ra=qa,Na=Fa,za={name:"AppBar",data:function(){return{navDrawerOpen:null}},computed:{navRoutes:function(){return Ra.filter((function(e){return!e.meta.hidden}))},avatarLetter:function(){return this.$store.state.loggedInUserId&&this.$store.state.currentUser&&this.$store.state.currentUser.id?this.$store.state.currentUser.id.substr(0,1).toUpperCase():""},isLoggedIn:function(){return null!==this.$store.state.loggedInUserId}},methods:{navIconClicked:function(){this.navDrawerOpen=!this.navDrawerOpen},logout:function(){this.$store.dispatch("logout"),this.$router.push({name:"Login"})}}},Pa=za,Ba=(a("c812"),a("40dc")),Ha=a("5bc1"),Ga=a("8212"),Ja=a("34c3"),Wa=a("f774"),Ka=Object(T["a"])(Pa,v,h,!1,null,"4b383b8d",null),Xa=Ka.exports;M()(Ka,{VAppBar:Ba["a"],VAppBarNavIcon:Ha["a"],VAvatar:Ga["a"],VIcon:U["a"],VList:We["a"],VListItem:Ke["a"],VListItemContent:Qe["g"],VListItemIcon:Ja["a"],VListItemTitle:Qe["k"],VMenu:se["a"],VNavigationDrawer:Wa["a"],VSpacer:A["a"],VToolbarTitle:L["c"]});var Qa={name:"App",data:function(){return{navDrawerOpen:null}},components:{AppBar:Xa},methods:{setThemeColors:function(){this.$vuetify.theme.themes.light.primary="#005da1",this.$vuetify.theme.themes.light.secondary="#d8ebf7",this.$vuetify.theme.themes.light.accent="#e57200",this.$vuetify.theme.themes.light.error="#bf0d3e",this.$vuetify.theme.themes.light.warning="#ffb81c",this.$vuetify.theme.themes.light.info="#2196F3",this.$vuetify.theme.themes.light.success="#4CAF50"}},created:function(){this.setThemeColors()}},Za=Qa,er=(a("62a9"),a("7496")),tr=a("a75b"),ar=Object(T["a"])(Za,g,m,!1,null,"3f14aa47",null),rr=ar.exports;M()(ar,{VApp:er["a"],VContainer:_t["a"],VContent:tr["a"]});var or=a("2f62");r["default"].use(or["a"]);var nr=new or["a"].Store({state:{loggedInUserId:localStorage.getItem("etLoginToken"),currentUser:null},mutations:{setLoggedInUserId:function(e,t){e.loggedInUserId=t},setCurrentUser:function(e,t){e.currentUser=t}},actions:{login:function(e,t){var a=e.commit;return Oa.getUser(t).then((function(e){localStorage.setItem("etLoginToken",e.id),a("setCurrentUser",e),a("setLoggedInUserId",e.id)}))},logout:function(e){var t=e.commit;localStorage.removeItem("etLoginToken"),t("setLoggedInUserId",null),t("setCurrentUser",null)},setCurrentUser:function(e,t){var a=e.commit;a("setCurrentUser",t)}},modules:{}}),sr=a("ce5b"),ir=a.n(sr);a("5363");r["default"].use(ir.a);var cr=new ir.a({icons:{iconfont:"mdi"}}),lr={methods:{sortArray:function(e,t){e.sort((function(e,a){return e[t].toLowerCase()<a[t].toLowerCase()?-1:e[t].toLowerCase()>a[t].toLowerCase()?1:0}))},ruleRequired:function(e){return null!==e&&void 0!==e&&""!==e||"Value is required"}},filters:{formatDate:function(e,t){return e?P.a.utc(e).local().format(t||"YYYY-MM-DD"):null},formatAmount:function(e){if(null!==e&&void 0!==e){var t=H()(e).format("0,0.00");return"NaN"===t?null:t}return null}}};r["default"].mixin(lr),r["default"].prototype.$filters=r["default"].options.filters,r["default"].config.productionTip=!1,r["default"].use(f.a,{vuetify:cr,buttonTrueText:"OK",buttonFalseText:"Cancel",color:"warning",icon:"mdi-warning",width:350,property:"$confirm"}),r["default"].use(n.a),l()(i.a),d()(i.a),Na.beforeEach((function(e,t,a){"Login"===e.name?a():nr.state.loggedInUserId?nr.state.currentUser?a():Oa.getUser(nr.state.loggedInUserId).then((function(e){nr.commit("setCurrentUser",e),a()})).catch((function(e){console.error("Error retrieving user",nr.state.loggedInUserId,e),a()})):a({name:"Login"})})),new r["default"]({el:"#app",router:Na,store:nr,vuetify:cr,render:function(e){return e(rr)}})},"5a61":function(e,t,a){"use strict";var r=a("abf6"),o=a.n(r);o.a},"5b6d":function(e,t,a){"use strict";var r=a("1f25"),o=a.n(r);o.a},"62a9":function(e,t,a){"use strict";var r=a("9fc0"),o=a.n(r);o.a},"6a40":function(e,t,a){},"74c8":function(e,t,a){"use strict";var r=a("32ca"),o=a.n(r);o.a},"7d35":function(e,t,a){},"7ea4":function(e,t,a){},8062:function(e,t,a){"use strict";var r=a("7ea4"),o=a.n(r);o.a},"8e7b":function(e,t,a){"use strict";var r=a("919e"),o=a.n(r);o.a},"919e":function(e,t,a){},"91f5":function(e,t,a){},"96be":function(e,t,a){},"96d0":function(e,t,a){"use strict";var r=a("b229"),o=a.n(r);o.a},9807:function(e,t,a){},"9fc0":function(e,t,a){},abf6:function(e,t,a){},b229:function(e,t,a){},b5d1:function(e,t,a){"use strict";var r=a("cb45"),o=a.n(r);o.a},be5f:function(e,t,a){},bf27:function(e,t,a){"use strict";var r=a("40d1"),o=a.n(r);o.a},c24d:function(e,t,a){},c5f1:function(e,t,a){"use strict";var r=a("df73"),o=a.n(r);o.a},c812:function(e,t,a){"use strict";var r=a("3ee8"),o=a.n(r);o.a},cb45:function(e,t,a){},cbb6:function(e,t,a){},cc26:function(e,t,a){"use strict";var r=a("242b"),o=a.n(r);o.a},d368:function(e,t,a){},dcdc:function(e,t,a){"use strict";var r=a("c24d"),o=a.n(r);o.a},df73:function(e,t,a){},e689:function(e,t,a){"use strict";var r=a("6a40"),o=a.n(r);o.a},f207:function(e,t,a){"use strict";var r=a("d368"),o=a.n(r);o.a},f4c1:function(e,t,a){"use strict";var r=a("91f5"),o=a.n(r);o.a}});
//# sourceMappingURL=app.4da86ce7.js.map